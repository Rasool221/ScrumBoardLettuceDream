<!doctype html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

        <title>Lettuce Dream - Scrum Board</title>
    </head>
    <body>
        <div class="container-fluid">
            <h1 class="display-2">Scrum</h1>
        </div>

        <div id="step-1" class="container">
            <h1 class="display-4" style="color: white;"> Step 1 </h1>
            <div id="removepicture" class="remove">
                <img id="trash-can" class="can" src="can.png"></img> 
            </div>
        </br>
            <div id="table" class="row" style="color: white; padding: 30px;">
                <div class="col">
                    <img src="rabbit.png" class="animal-picture"></img>
                    <div class="rabbit-droptarget">
                    </div>
                    <div class="rabbit-droptarget">
                    </div>
                    <div class="rabbit-droptarget">
                    </div>
                    <div class="rabbit-droptarget">
                    </div>
                    <div class="rabbit-droptarget">
                    </div>
                    <div class="rabbit-droptarget">
                    </div>
                    <div class="rabbit-droptarget">
                    </div>
                </div>
                <div class="vertical"></div>
                <div class="col">
                    <img src="snake.gif" class="animal-picture"></img>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                </div>
                <div class="vertical"></div>
                <div class="col">
                    <img src="turtle.png" class="animal-picture"></img>
                    <div class="turtle-droptarget">
                    </div>
                    <div class="turtle-droptarget">
                    </div>
                    <div class="turtle-droptarget">
                    </div>
                    <div class="turtle-droptarget">
                    </div>
                    <div class="turtle-droptarget">
                    </div>
                    <div class="turtle-droptarget">
                    </div>
                    <div class="turtle-droptarget">
                    </div>
                </div>
                <div class="vertical"></div>
                <div class="col">
                    <img src="dog.png" class="animal-picture"></img>
                    <div class="dog-droptarget">
                    </div>
                    <div class="dog-droptarget">
                    </div>
                    <div class="dog-droptarget">
                    </div>
                    <div class="dog-droptarget">
                    </div>
                    <div class="dog-droptarget">
                    </div>
                    <div class="dog-droptarget">
                    </div>
                    <div class="dog-droptarget">
                    </div>
                </div>
                <div class="vertical"></div>
                <div class="col">
                    <img src="cat.png" class="animal-picture"></img>
                    <div class="cat-droptarget">
                    </div>
                    <div class="cat-droptarget">
                    </div>
                    <div class="cat-droptarget">
                    </div>
                    <div class="cat-droptarget">
                    </div>
                    <div class="cat-droptarget">
                    </div>
                    <div class="cat-droptarget">
                    </div>
                    <div class="cat-droptarget">
                    </div>
                </div>
                <div class="vertical"></div>
                <div class="col">
                    <img src="kangaroo.png" class="animal-picture"></img>
                    <div class="kangaroo-droptarget">
                    </div>
                    <div class="kangaroo-droptarget">
                    </div>
                    <div class="kangaroo-droptarget">
                    </div>
                    <div class="kangaroo-droptarget">
                    </div>
                    <div class="kangaroo-droptarget">
                    </div>
                    <div class="kangaroo-droptarget">
                    </div>
                    <div class="kangaroo-droptarget">
                    </div>
                </div>
            </div>
        </div>

        <div id="upload" class="container" style="padding: 20px; margin-top: 20px;">
            <h1 class="display-4" style="color: white;"> Step 1 Upload </h1>
            <div class="file-field" style="padding: 20px;">
                <div class="btn btn-primary">
                  <input id="file-input" type="file">
                  <button id="uploadpic" type="button" multiple>Upload picture</button>
                </div>
            </div>
        </div>

        <div class="container" style="margin-top: 20px;">
            <h1 class="display-4" style="color: white;"> Step 2 </h1>
            <div id="removepicture" class="remove">
                <img id="trash-can" class="can" src="can.png"></img> 
            </div>
        </br>
            <div id="table-step2" class="row" style="color: white; padding: 30px;">
                <div class="col">
                    <img src="groundhog.png" class="animal-picture"></img>
                    <div class="groundhog-droptarget">
                    </div>
                    <div class="groundhog-droptarget">
                    </div>
                    <div class="groundhog-droptarget">
                    </div>
                    <div class="groundhog-droptarget">
                    </div>
                    <div class="groundhog-droptarget">
                    </div>
                    <div class="groundhog-droptarget">
                    </div>
                    <div class="groundhog-droptarget">
                    </div>
                </div>

                <div class="vertical"></div>

                <div class="col">
                    <img src="snake.gif" class="animal-picture"></img>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                    <div class="snake-droptarget">
                    </div>
                </div>

                <div class="vertical"></div>

                <div class="col">
                    <img src="hen.png" class="animal-picture"></img>
                    <div class="hen-droptarget">
                    </div>
                    <div class="hen-droptarget">
                    </div>
                    <div class="hen-droptarget">
                    </div>
                    <div class="hen-droptarget">
                    </div>
                    <div class="hen-droptarget">
                    </div>
                    <div class="hen-droptarget">
                    </div>
                    <div class="hen-droptarget">
                    </div>
                </div>
            </div>
        </div>
        
        <div id="upload" class="container" style="padding: 20px; margin-top: 20px;">
            <h1 class="display-4" style="color: white;"> Step 2 Upload </h1>
            <div class="file-field" style="padding: 20px;">
                <div class="btn btn-primary">
                  <input id="step2-file-input" type="file">
                  <button id="step2-uploadpic" type="button" multiple>Upload picture</button>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </body>
    <script>
        
        $("#step2-uploadpic").click(function() {
            var f = $("#step2-file-input")[0].files;    
            var counter = 0;

            for (var i = 0; i < f.length; i++) {
                

                var reader = new FileReader();
                var img = document.createElement("img");

                reader.onload = function(event) {
                    var the_url = event.target.result;

                    img.id = "pic"+counter;
                    img.className = "profilepic";
                    img.src = the_url;

                    $(".hen-droptarget")[0].appendChild(img);
                    //window.alert("Uploaded image successfuly");
                    counter += 1;
                }
                
                reader.readAsDataURL(f[0]);
                
                
            }

        });

        $("#uploadpic").click(function() {
            var f = $("#file-input")[0].files;    
            var counter = 0;

            for (var i = 0; i < f.length; i++) {
                

                var reader = new FileReader();
                var img = document.createElement("img");

                reader.onload = function(event) {
                    var the_url = event.target.result;

                    img.id = "pic"+counter;
                    img.className = "profilepic";
                    img.src = the_url;

                    $(".kangaroo-droptarget")[0].appendChild(img);
                    //window.alert("Uploaded image successfuly");
                    counter += 1;
                }
                
                reader.readAsDataURL(f[0]);
                
                
            }

        });

        var pos = {x:0, y: 0};
        var startPos = null;

        interact(".profilepic").draggable({
            snap: {
              targets: [startPos],
              range: Infinity,
              relativePoints: [{x:0.5, y:0.5}],
              endOnly: true  
            },
            onstart(event) {
                var rect = interact.getElementRect(event.target);

                startPos = {
                    x: rect.left + rect.width  / 2,
                    y: rect.top  + rect.height / 2
                }

                event.interactable.draggable({
                    snap: {
                        targets: [startPos]
                    }
                });
            },
            onmove(event) {
               
                var target = event.target,
                // keep the dragged position in the data-x/data-y attributes
                x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
                y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

                // translate the element
                target.style.webkitTransform = target.style.transform
                                            = 'translate(' + x + 'px, ' + y + 'px)';
                // update the position attributes
                target.setAttribute('data-x', x);
                target.setAttribute('data-y', y);

                var table = $("#table")[0];
                for (var i = 0; i < table.childElementCount; i++) {
                    for (var b = 0; b < table.children[i].childElementCount; b++) {
                        if (!table.children[i].children[b].className.includes("animal")) {
                            table.children[i].children[b].classList.add("drop-active");
                        }
                    }
                }

                var table2 = $("#table-step2")[0];
                for (var i = 0; i < table2.childElementCount; i++) {
                    for (var b = 0; b < table2.children[i].childElementCount; b++) {
                        if (!table2.children[i].children[b].className.includes("animal")) {
                            table2.children[i].children[b].classList.add("drop-active");
                        }
                    }
                }
    
            },
            onend(event) {
                var table = $("#table")[0];
                for (var i = 0; i < table.childElementCount; i++) {
                    for (var b = 0; b < table.children[i].childElementCount; b++) {
                        if (!table.children[i].children[b].className.includes("animal")) {
                            table.children[i].children[b].classList.remove("drop-active");
                        }
                    }
                }

                var table2 = $("#table-step2")[0];
                for (var i = 0; i < table2.childElementCount; i++) {
                    for (var b = 0; b < table2.children[i].childElementCount; b++) {
                        if (!table2.children[i].children[b].className.includes("animal")) {
                            table2.children[i].children[b].classList.remove("drop-active");
                        }
                    }
                }
            }
        })

        var position = {x:0, y:0};
        
        function intersectRect (rectA, rectB) {
         return !(
            rectB.left >= rectA.right ||
            rectB.right <= rectA.left ||
            rectB.top >= rectA.bottom ||
            rectB.bottom <= rectA.top
            );
        }


        interact(".remove").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.relatedTarget.remove();

                event.target.children[0].classList.remove("remove-activate");
            },
            ondragenter: function (event) {
                event.target.children[0].classList.add("remove-activate");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })

            },
            ondragleave: function (event) {
                event.target.classList.remove("remove-droptarget");
                event.target.children[0].classList.remove("remove-activate");
            }
        }).on("dropactivate", function (event) {

        })

        interact(".rabbit-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".snake-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".turtle-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".dog-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })

            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".cat-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target")
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".kangaroo-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".groundhog-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".hen-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
                event.target.classList.add("drop-target");
            },
            ondragenter: function (event) {
                event.target.classList.add("drop-target");

                var draggableElement = event.relatedTarget,
                    dropzoneElement  = event.target,
                    dropRect         = interact.getElementRect(dropzoneElement),
                    dropCenter       = {
                    x: dropRect.left + dropRect.width  / 2,
                    y: dropRect.top  + dropRect.height / 2
                };

                event.draggable.draggable({
                    snap : {
                        targets: [dropCenter]
                    }
                })
            },
            ondragleave: function (event) {
                event.target.classList.remove("drop-target");
            }
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

    </script>
</html>