<!doctype html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

        <title>Scrum</title>
    </head>
    <body>
        <div class="container-fluid">
            <h1 class="display-2">Scrum</h1>
        </div>
        <div id="step-1" class="container">
            <h1 class="display-4"> Step one </h1>
            <div class="row" style="color: white; padding: 30px;">
                <div class="col">
                    <p>Rabbit</p>
                    <div class="rabbit-droptarget">
                    </div>
                </div>
                <div class="col">
                    <p>Snake</p>
                    <div class="snake-droptarget">
                    </div>
                </div>
                <div class="col">
                    <p>Turtle</p>
                    <div class="turtle-droptarget">
                    </div>
                </div>
                <div class="col">
                    <p>Dog</p>
                    <div class="dog-droptarget">
                    </div>
                </div>
                <div class="col">
                    <p>Cat</p>
                    <div class="cat-droptarget">
                    </div>
                </div>
                <div class="col">
                    <p>Kangaroo</p>
                    <div class="kangaroo-droptarget">
                    </div>
                </div>
            </div>
        </div>

        <div id="upload" class="container" style="padding: 20px; margin-top: 20px;">
            <h1 class="display-4">Upload</h1>
            <div class="file-field" style="padding: 20px;">
                <div class="btn btn-primary">
                  <input id="file-input" type="file">
                  <button id="uploadpic" type="button" multiple>Upload picture</button>
                </div>
            </div>
        </div>
       
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    </body>
    <script>
        
        $("#uploadpic").click(function() {
            var f = $("#file-input")[0].files;    
            
            for (var i = 0; i < f.length; i++) {
                

                var reader = new FileReader();
                var img = document.createElement("img");

                reader.onload = function(event) {
                    var the_url = event.target.result;

                    img.id = "pic";
                    img.className = "profilepic";
                    img.src = the_url;

                    $(".kangaroo-droptarget")[0].appendChild(img);
                    window.alert("Uploaded image successfuly");

                }
                
                reader.readAsDataURL(f[0]);
                
                var pos = {x:0, y: 0};

                interact(".profilepic").draggable({
                    onmove(event) {
                        pos.x += event.dx;
                        pos.y += event.dy;
                        event.target.style.transform = `translate(${pos.x}px, ${pos.y}px)`; 
                        //console.log(event);
                    },
                    onend(event) {
                        console.log(event);
                        console.log(event.currentTarget.parentNode);
                        console.log(event.target.parentNode);
                    }
                })
            }

        });

        $(document).ready(function() {
            
            
        });

        var position = {x:0, y:0};
        
        interact(".draggable").draggable({
            listeners: {
                start (event) {
                    console.log(event.type, event.target);
                },
                move (event) {
                    position.x += event.dx;
                    position.y += event.dy;

                    event.target.style.transform = `translate(${position.x}px, ${position.y}px)`;

                },
                onstart(event) {
                    event.target.style.zIndex = parseInt(new Date().getTime() / 1000);
                    console.log(event.target.style.zIndex);
                }
            }
        })

        interact(".rabbit-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
            },
            accept: ".drag0, .drag1"
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".snake-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
            },
            accept: ".drag0, .drag1"
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".turtle-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
            },
            accept: ".drag0, .drag1"
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".dog-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
            },
            accept: ".drag0, .drag1"
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".cat-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
            },
            accept: ".drag0, .drag1"
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })

        interact(".kangaroo-droptarget").dropzone({
            ondrop: function (event) {
                console.log(event.relatedTarget.id + ' was dropped into ' + event.target.id);
            },
            accept: ".drag0, .drag1"
        }).on("dropactivate", function (event) {
            event.target.classList.add("drop-activated");
        })
    </script>
</html>